/* ===================== Design Tokens ===================== */
:root {
  /* ---------- Colors ---------- */
  --bg: #0b0b0d;
  --txt: #f2f3f5;
  --muted: #a9afbd;
  --card: #0f1117;
  --border: #1b1e27;
  --brand-1: #7c3aed;
  --brand-2: #0d7a8d;
  --ok: #22c55e;
  --warn: #f59e0b;
  --glass: rgba(12, 12, 14, .7);

  /* ---------- Typography ---------- */
  --ff: 'Space Grotesk', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  --fs-1: clamp(2rem, 3.6vw, 2.8rem);     /* hero */
  --fs-2: clamp(1.15rem, 2.2vw, 1.45rem); /* section lead */
  --fs-3: 1.02rem;                         /* body */
  --fs-4: .9rem;                           /* small */

  /* ---------- Spacing ---------- */
  --g-1: .5rem;
  --g-2: .75rem;
  --g-3: 1rem;
  --g-4: 1.5rem;
  --g-5: 2rem;
  --g-6: 3rem;
  --g-7: 4.5rem;

  /* ---------- Radii ---------- */
  --r-1: 12px;
  --r-2: 16px;
  --r-3: 24px;

  /* ---------- Shadows ---------- */
  --shadow-1: 0 1px 0 rgba(255, 255, 255, .02), 0 12px 40px rgba(0, 0, 0, .35);
}

@media (prefers-color-scheme: light) {
  :root {
    --bg: #fff;
    --txt: #0d0d10;
    --muted: #5b5f6b;
    --card: #f6f7fb;
    --border: #e6e8ef;
    --glass: rgba(255, 255, 255, .7);
  }
}


/* ===================== Base ===================== */
*, *::before, *::after { box-sizing: border-box; }

html { scroll-behavior: smooth; }

body {
  margin: 0;
  background:
    radial-gradient(900px 520px at 8% -10%, rgba(124, 58, 237, .10), transparent),
    radial-gradient(900px 520px at 92% 110%, rgba(13, 122, 141, .10), transparent),
    var(--bg);
  color: var(--txt);
  font: 400 var(--fs-3) / 1.6 var(--ff);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow-x: hidden;
}

a { color: inherit; }

/* Screen-reader only utility */
.visually-hidden {
  position: absolute !important;
  width: 1px; height: 1px;
  padding: 0; margin: -1px;
  overflow: hidden;
  clip: rect(0 0 0 0);
  white-space: nowrap;
  border: 0;
}

/* Layout container */
.container {
  max-width: 1120px;
  margin: 0 auto;
  padding-left: max(env(safe-area-inset-left), clamp(16px, 6vw, 32px));
  padding-right: max(env(safe-area-inset-right), clamp(16px, 6vw, 32px));
}

.section { padding: var(--g-6) 0; }

/* Focus ring */
:where(a, button, [tabindex]):focus {
  outline: 2px solid var(--brand-1);
  outline-offset: 2px;
  border-radius: 6px;
}

/* Skip link (accessibility) */
.skip {
  position: absolute;
  left: -9999px; top: auto;
  width: 1px; height: 1px;
  overflow: hidden;
}

.skip:focus {
  left: var(--g-3);
  top: var(--g-3);
  width: auto; height: auto;
  padding: .5rem .75rem;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 8px;
}


/* ===================== Header / Nav ===================== */
header.site {
  position: sticky;
  top: 0;
  z-index: 50;
  background: var(--glass);
  backdrop-filter: saturate(140%) blur(8px);
  border-bottom: 1px solid var(--border);
}

.nav {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: .7rem max(env(safe-area-inset-right), 16px);
  padding-left: max(env(safe-area-inset-left), 16px);
}

.brand {
  display: flex;
  align-items: center;
  gap: .6rem;
  font-weight: 700;
  letter-spacing: .02em;
}

.dot {
  width: 10px; height: 10px;
  border-radius: 50%;
  background: radial-gradient(circle at 40% 40%, #fff, var(--brand-1));
  box-shadow: 0 0 12px rgba(124, 58, 237, .55);
}

nav.primary a {
  color: var(--muted);
  text-decoration: none;
  font-weight: 600;
  margin-left: 1rem;
}

nav.primary a:hover { color: var(--txt); }

/* Mobile nav */
#menu-toggle, .menu-btn { display: none; }

@media (max-width: 820px) {
  .menu-btn {
    display: inline-flex;
    align-items: center;
    gap: .5rem;
    padding: .45rem .6rem;
    border: 1px solid var(--border);
    border-radius: 10px;
    background: transparent;
  }

  nav.primary {
    position: absolute;
    inset: 55px 0 auto 0;
    background: var(--card);
    border-bottom: 1px solid var(--border);
    display: none;
  }

  #menu-toggle:checked + .menu-btn + nav.primary { display: block; }

  nav.primary .container {
    padding-left: max(env(safe-area-inset-left), clamp(16px, 6vw, 32px));
    padding-right: max(env(safe-area-inset-right), clamp(16px, 6vw, 32px));
  }

  nav.primary a {
    display: block;
    padding: .75rem 0;
    margin: 0;
    border-top: 1px solid var(--border);
  }
}


/* ===================== Hero ===================== */
.hero {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--g-5);
  align-items: center;
  padding: var(--g-7) 0 var(--g-6);
}

@media (min-width: 900px) {
  .hero { grid-template-columns: 1.15fr .85fr; }
}

.h-title {
  margin: 0;
  font-size: var(--fs-1);
  font-weight: 700;
  letter-spacing: .01em;
  line-height: 1.15;
}

.h-sub {
  margin: .35rem 0 0;
  font-size: calc(var(--fs-3) * .98);
  color: var(--muted);
}

.h-tag {
  margin: .7rem 0 0;
  font-size: var(--fs-2);
  font-weight: 600;
  background: var(--grad-medium);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}




.btn {
  display: inline-flex;
  align-items: center; justify-content: center;
  gap: .5rem;
  padding: .7rem 1rem;
  border: 1px solid var(--border);
  border-radius: 12px;
  font-weight: 700;
  text-decoration: none;
}

.btn.primary {
  background: linear-gradient(90deg, var(--brand-1), var(--brand-2));
  border-color: transparent;
  color: #fff;
}

/* Mobile text padding */
@media (max-width: 640px) {
  .hero .h-title,
  .hero .h-sub,
  .hero .h-tag {
    padding-left: max(env(safe-area-inset-left), 20px);
    padding-right: max(env(safe-area-inset-right), 20px);
  }
}

.brandmark {
  background: linear-gradient(90deg, var(--brand-1), var(--brand-2));
  -webkit-background-clip: text;
          background-clip: text;
  -webkit-text-fill-color: transparent;
  font-weight: 700;
}

.nowrap { white-space: nowrap; }

/* XS tweaks */
@media (max-width: 420px) {
  :root {
    --fs-1: clamp(1.8rem, 7vw, 2.1rem);
    --fs-2: clamp(1.05rem, 4.5vw, 1.2rem);
  }

  .cta {
    flex-wrap: nowrap;
    justify-content: space-between;
    gap: .5rem;
    margin: 0 max(env(safe-area-inset-right), 16px) 0 max(env(safe-area-inset-left), 16px);
  }

  .cta .btn {
    flex: 1 0 auto;
    min-width: 44%;
  }

  .h-tag { margin-top: .5rem; }
}

@media (max-width: 360px) {
  :root { --fs-1: 1.75rem; --fs-2: 1.05rem; }
}

/* Orb visuals */
.orbwrap {
  position: relative;
  width: min(360px, 80vw);
  aspect-ratio: 1;
  margin-inline: auto;
}

canvas#oOrb {
  width: 100%; height: 100%;
  display: block; border-radius: 50%;
  box-shadow: 0 0 0 1px var(--border), 0 20px 60px rgba(0, 0, 0, .45);
}

.orbglow {
  position: absolute; inset: -8%;
  border-radius: 50%;
  background: radial-gradient(40% 40% at 50% 50%, rgba(124, 58, 237, .25), transparent 60%);
  pointer-events: none;
}


/* ===================== Cards / Grid ===================== */
.grid { display: grid; gap: var(--g-3); }

@media (min-width: 780px) {
  .grid.cols-2 { grid-template-columns: 1fr 1fr; }
}

.card {
  background: linear-gradient(180deg, rgba(255, 255, 255, .02), rgba(255, 255, 255, 0)), var(--card);
  border: 1px solid var(--border);
  border-radius: var(--r-2);
  padding: 1.25rem;
  box-shadow: var(--shadow-1);
  opacity: 0;
  transform: translateY(8px);
}

.card.revealed {
  opacity: 1;
  transform: none;
  transition: transform .6s cubic-bezier(.2, .7, .2, 1), opacity .6s ease;
}

.card h2 {
  margin: 0 0 .35rem;
  font-size: 1.1rem;
  color: var(--grad-medium);
}

.card p { margin: .35rem 0 .9rem; color: var(--muted); }


/* ===================== Elements ===================== */
.ai-banner {
  margin: var(--g-6) auto var(--g-5);
  padding: 1rem;
  max-width: 720px;
  text-align: center;
  font-weight: 500;
  color: var(--muted);
  background: rgba(124, 58, 237, .08);
  border: 1px solid var(--border);
  border-radius: 12px;
}

.badges {
  display: flex; flex-wrap: wrap;
  justify-content: center;
  gap: .5rem;
  margin-top: .5rem;
}

.badge {
  padding: .35rem .55rem;
  font-size: .85rem;
  color: var(--muted);
  border: 1px solid var(--border);
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(255, 255, 255, .02), rgba(255, 255, 255, 0));
}

.divider {
  height: 1px;
  margin: var(--g-5) 0;
  background: linear-gradient(90deg, transparent, var(--border), transparent);
}

.quote {
  margin: .75rem 0 1rem;
  padding: .75rem 1rem;
  font-style: italic; color: var(--txt);
  border-left: 3px solid var(--brand-2);
  border-radius: 8px;
  background: rgba(13, 122, 141, .06);
}


/* ===================== Footer links ===================== */
.links {
  display: flex; flex-wrap: wrap;
  justify-content: center; gap: .5rem;
}

.link {
  position: relative;
  font-weight: 600;
  color: var(--brand-2);
  text-decoration: none;
}

.link::after {
  content: "";
  position: absolute; left: 0; bottom: -2px;
  width: 0; height: 2px;
  background: linear-gradient(90deg, var(--brand-1), var(--brand-2));
  transition: width .25s ease;
}

.link:hover::after { width: 100%; }


/* ===================== Motion preferences ===================== */
@media (prefers-reduced-motion: reduce) {
  .card { transition: none !important; }
}


/* ===================== Mobile & iOS Fixes ===================== */
@media (max-width: 920px) {
  html, body { height: auto; overflow-y: auto; }

  header.site { position: static; }

  .timeline {
    display: grid;
    grid-template-areas: "rail" "stream";
    grid-template-columns: 1fr;
    gap: var(--g-3);
    align-items: start;
  }

  .timeline .rail {
    grid-area: rail;
    position: static !important;
    height: auto !important;
    margin: 0 0 var(--g-3) 0;
    z-index: auto;
  }

  .timeline .rail .progresswrap { display: none !important; }

  .stream { grid-area: stream; margin-top: 0 !important; }

  .list {
    max-height: none !important;
    overflow: visible !important;
    -webkit-overflow-scrolling: auto !important;
    padding-left: 14px;
  }

  .tcard { scroll-snap-align: none !important; }
  .stream .item { scroll-margin-top: 0; }
  .tcard::before { left: -10px; }
  .connector { left: -4px; }

  #menu-toggle { position: absolute; left: -9999px; }
}

@supports (-webkit-overflow-scrolling: touch) {
  @media (max-width: 920px) {
    header.site {
      backdrop-filter: none !important;
      background: var(--card) !important;
    }
  }
}


/* ===================== Timeline: Expandable items ===================== */
/* Collapsed */
.card.tcard[aria-expanded="false"] {
  max-height: 260px !important;
  overflow: hidden !important;
  height: auto !important;
}

.card.tcard[aria-expanded="false"] .detail {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3;
  overflow: hidden; position: relative;
}

.card.tcard[aria-expanded="false"] .detail::after {
  content: '';
  position: absolute; left: 0; right: 0; bottom: 0; height: 2em;
  background: linear-gradient(to top, var(--card) 0%, transparent 100%);
}

/* Expanded */
.card.tcard[aria-expanded="true"] {
  max-height: 9999px !important;
  overflow: visible !important;
}

.card.tcard[aria-expanded="true"] .detail {
  display: block; -webkit-line-clamp: initial;
}

.card.tcard[aria-expanded="true"] .detail::after { display: none; }

.card.tcard .toggle {
  position: absolute; right: .8rem; top: .8rem;
  cursor: pointer;
}

.card.tcard .toggle:hover {
  transform: scale(1.1);
  transition: transform .2s ease;
}

.page-try,
.page-reader,
.page-trader {
  --nav-fg: var(--ink);
  --nav-fg-active: var(--acc);
  --nav-bg-hover: color-mix(in srgb, var(--acc) 12%, transparent);
  --nav-shadow-hover: 0 0 12px color-mix(in srgb, var(--acc) 45%, transparent);
}
